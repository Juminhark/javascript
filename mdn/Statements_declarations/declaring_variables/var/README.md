# var

```js
var x = 1;

if (x === 1) {
  var x = 2;

  console.log(x); // 2
}

console.log(x); // 2
```

어디에 선언이 되어있든 간에 변수들은 어떠한 코드가 실행되기 전에 처리가 됩니다. var로 선언된 변수의 범위는 현재 실행 문맥인데, 그 문맥은 둘러싼 함수, 혹은 함수의 외부에 전역으로 선언된 변수도 될 수 있습니다.

선언된 변수들의 값 할당은 할당이 실행될 때 전역변수(이것은 전역 오브젝트의 프로퍼티가 됩니다)처럼 생성이 됩니다. 선언된 변수들과 선언되지 않은 변수들의 차이점은 다음과 같습니다

1. 선언된 변수들은 변수가 선언된 execution context 안에서 만들어 집니다. 선언되지 않은 변수들은 항상 전역변수 입니다.

```js
function x() {
  y = 1; // strict mode에서는 ReferenceError를 출력합니다
  var z = 2;
}

x();

console.log(y); // 1
console.log(z); // ReferenceError: z is not defined
```

2. 선언된 변수들은 어떠한 코드가 실행되기 전에 만들어집니다. 선언되지 않은 변수들은 변수들을 할당하는 코드가 실행되기 전까지는 존재하지 않습니다.

```js
console.log(a); // ReferenceError: a is not defined
console.log('stil going');
```

```js
var a;
console.log(a); // undefined
console.log('stil going'); // stil going
```

3. 선언된 변수들은 변수들의 execution context의 프로퍼티를 변경되지 않습니다. 선언되지 않은 변수들은 변경 가능합니다. (e.g 삭제 될 수도 있습니다.)

이러한 세가지 다른점 떄문에, 변수 선언 오류는 예기치 않은 결과로 이어질 가능성이 높습니다. 그러므로 `함수 또는 전역 범위인지 여부와 상관없이, 항상 변수를 선언 하는것을 추천`합니다.

## var hoisting

변수 선언들은 어느 코드가 실행 되기 전에 처리하기 때문에, 코드 안에서 어디서든 변수 선언은 최상위 선언한 것과 동등합니다. 이것은 변수가 선언되기 전에 사용 될 수 있다는 것을 의미합니다. 변수 선언이 함수 또는 전역 코드의 상단에 이동하는것과 같은 행동을 `Hoisting`이라고 불립니다.

```js
bla = 2;
var bla;
// ...

// 위 선언을 다음과 같이 암묵적으로 이해하면 됩니다

var bla;
bla = 2;
```

이러한 이유로, 전역코드의 상단과 함수 코드의 상단에 변수를 항상 선언하기를 권장합니다. 그러면 변수는 함수 범위가 되며, 스코프 체인으로 해결될것이 분명합니다.
